{"version":3,"sources":["../../../../src/shaderlib/color/color.js"],"names":["INITIAL_STATE","color_uOpacity","color_uDesaturate","color_uBrightness","getUniforms","opts","uniforms","opacity","vs","fs","name"],"mappings":"AAAA;;AAEA;AACA,MAAMA,aAAa,GAAG;AACpBC,EAAAA,cAAc,EAAE,GADI;AAEpBC,EAAAA,iBAAiB,EAAE,GAFC;AAGpBC,EAAAA,iBAAiB,EAAE;AAHC,CAAtB;;AAMA,SAASC,WAAT,GAA2C;AAAA,MAAtBC,IAAsB,uEAAfL,aAAe;AACzC,QAAMM,QAAQ,GAAG,EAAjB;;AACA,MAAID,IAAI,CAACE,OAAT,EAAkB;AAChBD,IAAAA,QAAQ,CAACL,cAAT,GAA0BI,IAAI,CAACE,OAA/B;AACD;;AACD,SAAOD,QAAP;AACD;;AAED,MAAME,EAAE,GAAI;;;;;;CAAZ;AAQA,MAAMC,EAAE,GAAI;;;;;;;;;;;;;;;;;;;;;CAAZ;AAuBA,eAAe;AACbC,EAAAA,IAAI,EAAE,OADO;AAEbF,EAAAA,EAFa;AAGbC,EAAAA,EAHa;AAIbL,EAAAA;AAJa,CAAf","sourcesContent":["// TODO - this module is a WIP\n\n/* eslint-disable camelcase */\nconst INITIAL_STATE = {\n  color_uOpacity: 1.0,\n  color_uDesaturate: 0.0,\n  color_uBrightness: 1.0\n};\n\nfunction getUniforms(opts = INITIAL_STATE) {\n  const uniforms = {};\n  if (opts.opacity) {\n    uniforms.color_uOpacity = opts.opacity;\n  }\n  return uniforms;\n}\n\nconst vs = `\\\nvarying vec4 color_vColor;\n\ncolor_setColor(vec4 color) {\n  color_vColor = color;\n}\n`;\n\nconst fs = `\\\nuniform float color_uOpacity;\nuniform float color_uDesaturate;\nuniform float color_uBrightness;\n\nvarying vec4 color_vColor;\n\nvec4 color_getColor() {\n  return color_vColor;\n}\n\nvec4 color_filterColor(vec4 color) {\n  // apply desaturation and brightness\n  if (color_uDesaturate > 0.01) {\n    float luminance = (color.r + color.g + color.b) * 0.333333333 + color_uBrightness;\n    color = vec4(mix(color.rgb, vec3(luminance), color_uDesaturate), color.a);\n\n  // Apply opacity\n  color = vec4(color.rgb, color.a * color_uOpacity);\n  return color;\n}\n`;\n\nexport default {\n  name: 'color',\n  vs,\n  fs,\n  getUniforms\n};\n"],"file":"color.js"}