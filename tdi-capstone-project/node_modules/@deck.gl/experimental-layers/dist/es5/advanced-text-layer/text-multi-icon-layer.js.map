{"version":3,"sources":["../../../src/advanced-text-layer/text-multi-icon-layer.js"],"names":["defaultProps","IconLayer","TextMultiIconLayer","Object","assign","vs","fs","uniforms","props","fontSmoothing","sizeScale","smoothing","attribute","data","value","i","object","x","y","layerName"],"mappings":";;;;;;;AAoBA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA,IAAMA,YAAY,GAAGC,kBAAUD,YAA/B;;IAEqBE,kB;;;;;;;;;;;;;iCACN;AACX,aAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,sFAAsC;AAACC,QAAAA,EAAE,EAAFA,gCAAD;AAAKC,QAAAA,EAAE,EAAFA;AAAL,OAAtC,CAAP;AACD;;;+BAEgB;AAAA,UAAXC,QAAW,QAAXA,QAAW;AAAA,wBACoB,KAAKC,KADzB;AAAA,UACRC,aADQ,eACRA,aADQ;AAAA,UACOC,SADP,eACOA,SADP;;AAGf,mFAAW;AACTH,QAAAA,QAAQ,EAAEJ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBG,QAAlB,EAA4B;AACpC;AACAI,UAAAA,SAAS,EAAED,SAAS,GAAG,CAAZ,GAAgBD,aAAa,GAAGC,SAAhC,GAA4C;AAFnB,SAA5B;AADD,OAAX;AAMD;;;6CAEwBE,S,EAAW;AAAA,UAC3BC,IAD2B,GACnB,KAAKL,KADc,CAC3BK,IAD2B;AAAA,UAE3BC,KAF2B,GAElBF,SAFkB,CAE3BE,KAF2B;AAGlC,UAAIC,CAAC,GAAG,CAAR;AAHkC;AAAA;AAAA;;AAAA;AAIlC,6BAAqBF,IAArB,8HAA2B;AAAA,cAAhBG,MAAgB;AACzBF,UAAAA,KAAK,CAACC,CAAC,EAAF,CAAL,GAAaC,MAAM,CAACC,CAApB;AACAH,UAAAA,KAAK,CAACC,CAAC,EAAF,CAAL,GAAaC,MAAM,CAACE,CAApB;AACD;AAPiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQnC;;;;EAxB6CjB,iB;;;AA2BhDC,kBAAkB,CAACiB,SAAnB,GAA+B,oBAA/B;AACAjB,kBAAkB,CAACF,YAAnB,GAAkCA,YAAlC","sourcesContent":["// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {IconLayer} from '@deck.gl/layers';\nimport vs from './advanced-text-layer-vertex.glsl';\nimport fs from './advanced-text-layer-fragment.glsl';\n\n// TODO: provide more props\nconst defaultProps = IconLayer.defaultProps;\n\nexport default class TextMultiIconLayer extends IconLayer {\n  getShaders() {\n    return Object.assign({}, super.getShaders(), {vs, fs});\n  }\n\n  draw({uniforms}) {\n    const {fontSmoothing, sizeScale} = this.props;\n\n    super.draw({\n      uniforms: Object.assign({}, uniforms, {\n        // TODO: handle for individual sizes using this.props.getSize()\n        smoothing: sizeScale > 0 ? fontSmoothing / sizeScale : 0\n      })\n    });\n  }\n\n  calculateInstanceOffsets(attribute) {\n    const {data} = this.props;\n    const {value} = attribute;\n    let i = 0;\n    for (const object of data) {\n      value[i++] = object.x;\n      value[i++] = object.y;\n    }\n  }\n}\n\nTextMultiIconLayer.layerName = 'TextMultiIconLayer';\nTextMultiIconLayer.defaultProps = defaultProps;\n"],"file":"text-multi-icon-layer.js"}